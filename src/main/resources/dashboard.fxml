<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.shape.Circle?>

<StackPane xmlns="http://javafx.com/javafx/8.0.171" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.synergy.controller.fx.DashboardController">
    
    <BorderPane style="-fx-background-color: #f8f9fa;">
        
        <left>
            <VBox spacing="10" style="-fx-background-color: #0f172a;" prefWidth="260">
                <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-padding: 24;">
                    <Circle fill="transparent" stroke="#22d3ee" strokeWidth="2" radius="10"/>
                    <Label text="Synergy" style="-fx-text-fill: white; -fx-font-size: 24px; -fx-font-weight: bold;"/>
                </HBox>
                
                <VBox spacing="8" style="-fx-padding: 0 16 0 16;" VBox.vgrow="ALWAYS">
                    <Button text="Dashboard" alignment="CENTER_LEFT" maxWidth="Infinity" 
                            style="-fx-background-color: #1e293b; -fx-text-fill: #22d3ee; -fx-font-weight: bold; -fx-font-size: 14px; -fx-padding: 10 16; -fx-border-color: #22d3ee; -fx-border-width: 0 0 0 4; -fx-cursor: hand;"/>
                    
                    <HBox alignment="CENTER_LEFT" spacing="10" onMouseClicked="#toggleNotifications"
                          style="-fx-padding: 10 16; -fx-background-radius: 4; -fx-cursor: hand;">
                        <Label text="ðŸ”” Notifiche" style="-fx-text-fill: #94a3b8; -fx-font-weight: bold; -fx-font-size: 14px;"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Label fx:id="notificationBadge" text="0" 
                               style="-fx-background-color: #ef4444; -fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 11px; -fx-padding: 2 6; -fx-background-radius: 10;"/>
                    </HBox>
                    
                    <Label text="PROGETTI RECENTI" style="-fx-text-fill: #64748b; -fx-font-size: 12px; -fx-font-weight: bold; -fx-padding: 24 0 8 16;"/>
                </VBox>
                
                <VBox style="-fx-border-color: #1e293b; -fx-border-width: 1 0 0 0; -fx-padding: 16;">
                    <HBox alignment="CENTER_LEFT" spacing="12">
                        <StackPane>
                            <Circle radius="16" fill="#0891b2"/>
                            <Label text="UT" style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 12px;"/>
                        </StackPane>
                        <VBox>
                            <Label fx:id="welcomeLabel" text="Utente" style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 14px;"/>
                            <Label text="Online" style="-fx-text-fill: #64748b; -fx-font-size: 12px;"/>
                        </VBox>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button text="Esci" onAction="#handleLogout" style="-fx-background-color: transparent; -fx-text-fill: #64748b; -fx-cursor: hand; -fx-font-size: 12px;"/>
                    </HBox>
                </VBox>
            </VBox>
        </left>

        <center>
            <VBox spacing="30" onMouseClicked="#hideNotificationsIfClickOutside">
                <padding><Insets top="40" right="40" bottom="40" left="40"/></padding>
                
                <HBox alignment="BOTTOM_LEFT">
                    <VBox spacing="5">
                        <Label text="Panoramica" style="-fx-font-size: 30px; -fx-font-weight: bold; -fx-text-fill: #1e293b;"/>
                        <Label text="Bentornato. Ecco i tuoi progetti e le tue attivitÃ ." style="-fx-font-size: 14px; -fx-text-fill: #64748b;"/>
                    </VBox>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button text="+ Nuovo Progetto" onAction="#handleNewProject" 
                            style="-fx-background-color: #000000; -fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 14px; -fx-padding: 10 20; -fx-background-radius: 8; -fx-cursor: hand; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 10, 0, 0, 4);"/>
                </HBox>
                
                <VBox spacing="15" VBox.vgrow="ALWAYS">
                    <Label text="I Miei Progetti" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #334155;"/>
                    <ListView fx:id="projectListView" VBox.vgrow="ALWAYS" 
                              style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-control-inner-background: #f8f9fa; -fx-font-size: 15px; -fx-font-weight: bold; -fx-text-fill: #1e293b;"/>
                </VBox>
            </VBox>
        </center>
    </BorderPane>

    <VBox fx:id="notificationPanel" visible="false" StackPane.alignment="TOP_LEFT" 
          maxWidth="320" maxHeight="350"
          style="-fx-background-color: white; -fx-background-radius: 8; -fx-border-color: #e2e8f0; -fx-border-radius: 8; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.15), 15, 0, 4, 4);">
        
        <StackPane.margin>
            <Insets top="130" left="270"/> 
        </StackPane.margin>
        
        <HBox alignment="CENTER_LEFT" style="-fx-padding: 12 16; -fx-background-color: #f8fafc; -fx-background-radius: 8 8 0 0; -fx-border-color: #e2e8f0; -fx-border-width: 0 0 1 0;">
            <Label text="Ultime Notifiche" style="-fx-font-size: 12px; -fx-font-weight: bold; -fx-text-fill: #64748b;"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button text="Pulisci" onAction="#handleClearNotifications" 
                    style="-fx-background-color: #e2e8f0; -fx-text-fill: #475569; -fx-font-size: 10px; -fx-font-weight: bold; -fx-padding: 2 6; -fx-background-radius: 4; -fx-cursor: hand;"/>
        </HBox>
        
        <ListView fx:id="notificationsListView" VBox.vgrow="ALWAYS" 
                  style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-control-inner-background: white; -fx-font-size: 12px; -fx-text-fill: #475569; -fx-padding: 5;"/>
    </VBox>
    
</StackPane>